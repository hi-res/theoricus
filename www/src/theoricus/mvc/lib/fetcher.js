// Generated by CoffeeScript 1.6.3
var Fetcher,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

module.exports = Fetcher = (function() {
  Fetcher.prototype.loaded = null;

  Fetcher.prototype.onload = null;

  Fetcher.prototype.onerror = null;

  Fetcher.prototype.data = null;

  function Fetcher() {
    this._on_queue_complete = __bind(this._on_queue_complete, this);
    this._on_file_loaded = __bind(this._on_file_loaded, this);
    this.queue = new createjs.LoadQueue(false);
    this.queue.addEventListener("complete", this._on_queue_complete);
    this.queue.addEventListener("fileload", this._on_file_loaded);
  }

  Fetcher.prototype._on_file_loaded = function(e) {};

  Fetcher.prototype.load = function(records) {
    var model, _i, _len, _ref;
    this.records = records != null ? records : [];
    _ref = this.records;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      model = _ref[_i];
      if (typeof model.load === "function") {
        model.load(this);
      }
    }
    return this.queue.load();
  };

  Fetcher.prototype.img = function(path) {
    return this.queue.loadFile(path, false);
  };

  Fetcher.prototype._on_queue_complete = function() {
    var action, controller;
    if (this.process != null) {
      controller = this.process.route.controller_name;
      action = this.process.route.action_name;
    }
    return typeof this.onload === "function" ? this.onload(this.records) : void 0;
  };

  return Fetcher;

})();
